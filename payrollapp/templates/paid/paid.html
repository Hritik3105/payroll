{% extends 'layout/admin.html' %}

{%block content%}
<style>
    tbody tr {
        display : none;
    }
    tr.parent {
        display : table-row;
    }
    tr.open {
        display : table-row;
    }

    
    select {
      width: 86px;
      height: 39px;
  }
  .table-main {
    padding: 17px;
    box-shadow: 0 0 2px !important;
    margin-bottom:15px;
  }
  .table:not(.table-dark) thead:not(.table-dark) th {
    color: #000000 !important;
  }
  .table-bordered {
    border: 1px solid #ddd;
  } 
  .table-bordered {
    border: 1px solid #ddd;
    box-shadow: 0 0 0px 1px !important;
  }
  .resultmsg {
    height: 68vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  a.result_clicker {
    background: #182535;
    padding: 7px 15px;
    color: #fff;
    border-radius: 8px;
  }
  a.result_clicker {
    color: #fff !important;
    text-decoration: none;
}
</style>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>






 
    {% if obj|length == 0 %} 
 <div class="row w-100">
    <div class="col-md-12 resultmsg">
        <div class="text-center">
        <h1 class="no_result_msg">No Result Found </h1>
        <a href="{% url 'paid' %}" class="result_clicker">Back</a>
        </div>
    </div>
</div>
    
  
    {% comment %} <tr class="parent">
       
      <td><a href="#"> </a></td>

      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
  </tr>
 
  <tr>
      
      <td></td> 
      <td></td>
      
      <td></td>
      <td></td>
      <td></td>
      
  </tr> {% endcomment %}
  {%else%}
  <div class="table-main">
  <table id="products"  class="datatables-ajax table table-bordered mb-d">
    <thead>
    <tr>
        <th>Business Name</th>
        <th>Invoice</th>
        <th>Semana1</th>
        <th>Semana2</th>
        <th>Semana3</th>
        <th>Semana4</th>
    </tr>
    </thead>
    <tbody>
    {% for i,j in obj.items %}
    
    <tr class="parent">
       
        <td><a href="#"> + {{i}}</a></td>

        <td>{{j.0.0}}</td>
        {%if j.0.1 >= 0 and j.0.1 <= 1.75 %}
        <td>{{j.0.2}}</td>
        {%else%}
        <td></td>
        {%endif%}
        {%if j.0.1 > 1.75 and j.0.1 <= 3.75 %}
        <td>{{j.0.2}}</td>
        {%else%}
        <td></td>
        {%endif%}
        {%if j.0.1 > 3.75 and j.0.1 <= 5.75 %}
        <td>{{j.0.2}}</td>
        {%else%}
        <td></td>
        {%endif%}
        {%if j.0.1 > 5.75 and j.0.1 <= 7.75 %}
        <td>{{j.0.2}}</td>
        {%else%}
        <td></td>
        {%endif%}
    </tr>
    {%for z in j|slice:"1:"%}
    
    <tr>
        
        <td></td> 
        <td>{{z.0}}</td>
        {%if z.1 >= 0 and z.1 <= 1.75 %}
         <td>{{z.2}}</td>
        {%else%}
        <td></td>
        {%endif%}
        {%if z.1 > 1.75 and z.1 <= 3.75 %}
        <td>{{z.2}}</td>
        {%else%}
        <td></td>
        {%endif%}
        {%if z.1 > 3.75 and z.1 <= 5.75 %}
        <td>{{z.2}}</td>
        {%else%}
        <td></td>
        {%endif%}
        {%if z.1 > 5.75 and z.1 <= 7.75 %}
        <td>{{z.2}}</td>
        {%else%}
        <td></td>
        {%endif%}
        
        {%endfor%}
    </tr>
     {%endfor%}{%endif%}
    </tbody>
</table>
</div>
<script>

    document.getElementById("products").addEventListener("click", function(e) {
        if (e.target.tagName === "A") {
            e.preventDefault();
            var row = e.target.parentNode.parentNode;
            while ((row = nextTr(row)) && !/\bparent\b/.test(row.className))
                toggle_it(row);
        }
    });
    
    function nextTr(row) {
        while ((row = row.nextSibling) && row.nodeType != 1);
        return row;
    }
    
    function toggle_it(item){ 
         if (/\bopen\b/.test(item.className))
              
             item.className = item.className.replace(/\bopen\b/," ");
            

         else
             item.className += " open";
     } 

     {% comment %} window.onload = function() {
      var selItem = sessionStorage.getItem("SelItem");  
      $('#sort-item').val(selItem);
      var year = sessionStorage.getItem("year");  
      $('#sort-items').val(year);
      
      }
      $('#sort-item').change(function() { 
          var selVal = $(this).val();
          console.log(selVal)
          sessionStorage.setItem("SelItem", selVal);
      
        });

      
   
      $('#sort-items').change(function() { 
          var selVals = $(this).val();
          console.log(selVals)
          sessionStorage.setItem("year", selVals);
      }); {% endcomment %}


</script>
{%endblock%}